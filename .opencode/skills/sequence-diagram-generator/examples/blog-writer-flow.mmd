sequenceDiagram
    actor U as 用户
    participant O as opencode CLI<br/>(Agent)
    participant L as LLM<br/>(Kimi/Qwen等)
    participant F as 文件系统
    
    U->>O: 输入 /blog-writer "健身心得"
    O->>F: 读取 .opencode/skills/blog-writer/SKILL.md
    O->>L: 发送：SKILL.md 内容 + 用户输入<br/>+"请按此技能流程执行"
    
    Note over L: LLM 解析 SKILL.md<br/>识别出需要交互式提问
    
    L->>O: 调用 question 工具<br/>主题类别选项
    O->>U: 显示交互式弹窗<br/>[1]运动健康 [2]投资理财...
    U->>O: 选择 [1] 运动健康
    O->>L: 返回用户选择：运动健康
    
    L->>O: 调用 question 工具<br/>文章类型选项
    O->>U: 显示交互式弹窗<br/>[1]技术分享 [2]产品分析...
    U->>O: 选择 [6] 经验分享
    O->>L: 返回：经验分享
    
    L->>O: 调用 question 工具<br/>写作风格选项
    O->>U: 显示交互式弹窗<br/>[1]故事叙述 [2]朴实稳重...
    U->>O: 选择 [1] 故事叙述
    O->>L: 返回：故事叙述
    
    Note over L: LLM 已收集：主题=运动健康<br/>类型=经验分享，风格=故事叙述
    
    L->>O: 调用 Read 工具<br/>读取 samples/运动健康 | 极限健身...
    O->>F: 读取示例文章
    O->>L: 返回示例内容
    
    Note over L: LLM 分析示例风格特征
    
    L->>O: 调用 question 工具<br/>"请提供素材或直接开始？"
    O->>U: 显示对话框
    U->>O: 粘贴："我去年开始健身..."
    O->>L: 返回用户素材
    
    Note over L: LLM 整合所有信息<br/>生成文章大纲
    
    L->>O: 生成大纲文本
    O->>U: 显示大纲供确认<br/>"标题选项：A/B/C<br/>结构：..."
    U->>O: 回复："用标题B，开始写"
    O->>L: 返回确认
    
    Note over L: LLM 撰写正文<br/>应用风格+模板+素材
    
    L->>O: 调用 Write 工具<br/>保存到 archives/20260131_...
    O->>F: 写入文件
    O->>L: 返回成功
    
    L->>O: "文章已保存到：archives/..."
    O->>U: 显示完成消息
